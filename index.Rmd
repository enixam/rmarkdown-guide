--- 
title: "R Markdown 指南"
author: 
  - 王祎帆
  - 闫求识
  - 高春辉
date: "`r Sys.Date()`"
documentclass: ctexbook
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
colorlinks: yes
lot: yes
lof: yes
geometry: [b5paper, tmargin=2.5cm, bmargin=2.5cm, lmargin=3.5cm, rmargin=2.5cm]
site: bookdown::bookdown_site
description: "R Markdown 指南"
github-repo: cosname/rmarkdown-guide
#cover-image: images/cover.jpg
---

# 前言 {-}



欢迎来到《R Markdown 中文指南》的在线版。[R Markdown](https://rmarkdown.rstudio.com/) 是 [R](https://www.r-project.org/) 语言的一个扩展包(package)。它为数据科学工作提供了一个交互式的环境, 用户可以即时地处理, 分析和可视化数据。工作完成后, 可以将一键把文档生成网页, PDF 和幻灯片等多种形式, 将文字, 代码和图片优美地组合呈现。

但是, R Markdown 的用途远不止此。本质上, 它仅仅规定了一套组合代码与文字的格式，用户可以随意添加内容并扩展该格式 。因此, 无论你是否将 R 语言作为主要工具, 习惯编写代码, 从事数据科学，或者专注于技术协作, R Markdown 都可以为你所用。 本书的 \@ref(rmarkdown-gallery) 节简要地展示了 R Markdown 丰富的用例, 你可以。相信你在读完本书之后, 也能在找到它的用武之地, 甚至加入 R Markdown 的开发者行列, 为它添加新的可能性。

本书的读者只需对 R 语言和 RStudio 的使用有基本了解, 例如知道如何安装包, 使用 R 中的一些常见函数, 以及在 RStudio 中创建项目和文件。如果你没有以下基础, 我们推荐以下快速入门资料


<!-- 需要补充说明 -->

- [R 语言教程](https://www.math.pku.edu.cn/teachers/lidf/docs/Rbook/html/_Rbook/index.html): 北京大学李东风老师《R 语言教程》的草稿

- [153 分钟学会 R](https://cran.r-project.org/doc/contrib/Liu-FAQ.pdf): 用 152 个 Q&A 解答初学者的常见问题。作者刘思喆。


...

```{r, setup, include=FALSE}
if (knitr::is_html_output()) {
  # ignore percentage widths for HTML output, unless they are used for multiple
  # figures side by side
  knitr::opts_hooks$set(out.width = function(options) {
    if (options$fig.show != 'hold' && grepl('%$', options$out.width))
      options$out.width = NULL
    options
  })
}

# 安装需要的包
xfun::pkg_load2(c('formatR', 'kableExtra', 'magick', 'tikzDevice', 'printr'))

import_example <- function(file, lang = xfun::file_ext(file)) {
  x = xfun::read_utf8(file.path("examples", file))
  lang = tolower(lang)
  if (nchar(lang) > 1) {
    lang = sub('^r', '', lang)
    if (lang == 'nw') lang = 'tex'
  }
  knitr::asis_output(paste(c(sprintf("````%s", lang), x, "````"), collapse = '\n'))
}

options(bookdown.post.latex = function(x) {
  # substitute nonbreaking spaces in \texttt{} with normal spaces
  m = gregexpr('\\\\texttt\\{[^}]+}', x)
  regmatches(x, m) = lapply(regmatches(x, m), function(z) {
    gsub('\\\\ ', ' ', z)
  })

  # fix syntax highlighting:
  # \FunctionTok{tufte:}\AttributeTok{:tufte_html: default} ->
  # \FunctionTok{tufte::tufte_html:}\AttributeTok{ default}
  x = gsub('(\\\\AttributeTok\\{[^:]+:)(})(\\\\FunctionTok\\{)(:[^:]+:)', '\\1\\4\\2\\3', x)
  if (length(i <- grep('^\\\\begin\\{longtable\\}', x)) == 0) return(x)
  i1 = bookdown:::next_nearest(i, which(x == '\\toprule'))
  i2 = bookdown:::next_nearest(i, which(x == '\\endfirsthead'))
  x[i1 - 1] = paste0(x[i1 - 1], '\n\\begin{tabular}{', gsub('[^lcr]', '', gsub('.*\\[]', '', x[i])), '}')
  x[i] = '\\begin{table}'
  x[x == '\\end{longtable}'] = '\\end{tabular}\n\\end{table}'
  x[x == '\\endhead'] = ''
  x = x[-unlist(mapply(seq, i1, i2, SIMPLIFY = FALSE))]
  x
})
```
